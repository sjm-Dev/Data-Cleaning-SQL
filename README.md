# üìä Proyecto de Data Cleaning - MySQL


## üìå Contenido  

1. [Descripci√≥n](#Descripci√≥n)  
2. [Objetivo](#Objetivo)  
3. [Proceso de limpieza de datos](#Proceso-de-limpieza-paso-a-paso)  
   - [PASO 1: Eliminaci√≥n de Duplicados](#paso-1-eliminaci√≥n-de-duplicados)  
   - [Paso 2: Normalizaci√≥n de datos](#paso-2-normalizaci√≥n-de-datos)  
   - [Paso 3: Manejo de valores nulos](#paso-3-manejo-de-valores-nulos)  
   - [Paso 4: Eliminaci√≥n de columnas innecesarias](#paso-4-eliminaci√≥n-de-columnas-innecesarias)  
4. [Resultado final](#-resultado-final)  
5. [C√≥digo completo](#-c√≥digo-completo)  
6. [Autor](#-autor)  

---

## **Descripci√≥n**
Este proyecto consiste en la limpieza y optimizaci√≥n de una base de datos utilizando SQL.  
El objetivo es eliminar errores, valores nulos y redundancias para asegurar que los datos sean precisos y listos para an√°lisis.  

**Tecnolog√≠as utilizadas:** SQL  
**Casos de uso:** Preparaci√≥n de datos para an√°lisis en herramientas como Tableau, Power BI o modelos de Machine Learning.


## **Objetivo** 
Realizar **Data Cleaning** en un dataset de **despidos masivos** para mejorar la calidad y confiabilidad de los datos antes de su an√°lisis. Esto asegurar√° que las visualizaciones y modelos posteriores est√©n basados en informaci√≥n precisa.

--- 

## **Proceso de limpieza paso a paso**

Dataset original:

![image.png](image.png)

Dimensi√≥n del dataset original:

![image.png](image%201.png)

## **Creaci√≥n de una tabla de trabajo**

Antes de comenzar la limpieza, se crea una **copia de la tabla original** para evitar modificar los datos originales y conservar un respaldo en caso de errores.

Se copia la estructura y datos de `company_layoffs` a `company_layoffs_cleaned` para realizar cambios sin afectar el dataset base.

![image.png](image%202.png)

Esto permite:

‚úÖ Mantener la fuente de datos intacta.

‚úÖ Probar diferentes t√©cnicas de limpieza sin riesgo.

‚úÖ Revertir cambios si es necesario.

## PASO 1: Eliminaci√≥n de Duplicados

Los datos duplicados pueden distorsionar an√°lisis y visualizaciones, generando **resultados incorrectos**. Para evitar esto:

- Se usa `ROW_NUMBER()` para **identificar registros repetidos** basados en columnas clave.
- El obetivo es eliminar registros innecesarios con `row_num > 1`, manteniendo solo una versi√≥n de cada fila.

Muestra de las filas duplicadas:

![image.png](image%203.png)

Ejemplo de duplicados by ‚Äúcompany = ‚ÄòOda‚Äô

![image.png](image%204.png)

![image.png](image%205.png)

### **üö® Problema al eliminar duplicados**

Al intentar eliminar duplicados usando `ROW_NUMBER()` en una CTE, MySQL arroj√≥ el siguiente error:

üìå **Error 1288:** *"The target table of the DELETE is not updatable."*

üì∑ **Salida del error:**

![image.png](image%206.png)

üîπ **Causa:** MySQL no permite ejecutar `DELETE` directamente sobre una CTE.

üîπ **Soluci√≥n aplicada:** En lugar de eliminar desde la CTE, se cre√≥ una nueva tabla (`company_layoffs_cleaned2`) con los datos depurados.

**A√∫n as√≠ el problema persisti√≥. A partir de la tabla (company_layoffs_cleaned) se tuvo que generar una nueva (company_layoffs_cleaned2), agregarle la columna ‚Äúrow_num‚Äù como INT y as√≠ hacer el borrado de los duplicados:**

![image.png](image%207.png)

üì∑ **C√≥digo corregido y ejecuci√≥n exitosa** *(Si tienes una imagen del c√≥digo funcionando, agr√©gala)*

![image.png](image%208.png)

**üìå Duplicados a eliminar en la nueva Tabla**

Luego de crear `company_layoffs_cleaned2`, identificamos los registros duplicados con `row_num > 1`, que ser√°n eliminados en el siguiente paso.

![image.png](image%209.png)

üìå **Datos despu√©s de eliminar duplicados**

Tras aplicar la eliminaci√≥n de registros con `row_num > 1`, obtenemos una tabla sin filas duplicadas, lista para los siguientes pasos de limpieza.

![image.png](image%2010.png)

## **PASO 2: Estandarizaci√≥n de Datos**

### Eliminaci√≥n de espacios en blanco

An√°lisis de la Columna `company`

Para garantizar coherencia en los nombres de las compa√±√≠as, se aplica `TRIM()`, que elimina espacios en blanco al inicio y al final de cada valor en la columna `company`. 

- `TRIM()` elimina espacios en blanco (del principio o del final de la columna `company`).

![image.png](image%2011.png)

üìå **Estado del Dataset tras la estandarizaci√≥n**

Despu√©s de eliminar espacios en blanco y estandarizar los nombres de la columna `company`, el dataset ya presenta una mayor uniformidad y calidad para su an√°lisis.

![image.png](image%2012.png)

### An√°lisis de la Columna `industry`

### **Problemas detectados en la columna `industry`**

**1Ô∏è‚É£ Valores vac√≠os: Algunas filas tienen `NULL`, lo que puede afectar el an√°lisis. (VACIOS O NULL?)**

üì∑ **Ejemplo de valores nulos en `industry`** 

![image.png](image%2013.png)

![image.png](image%2014.png)

**Soluci√≥n aplicada:**

- Se completan valores `NULL` en `industry` utilizando informaci√≥n de la misma empresa cuando est√° disponible. En este caso para `company` se tiene la industria `Travel` . Por lo que se completa con ese mismo dato a la fila con valor **VAC√çO**.
- En caso de no contar con datos suficientes, los valores permanecen como `NULL` para evitar asumir informaci√≥n incorrecta.

‚úî **Beneficio:** Se mejora la calidad del dataset, reduciendo la p√©rdida de datos sin introducir sesgos.

2Ô∏è‚É£ **Inconsistencias en los nombres**

Existen variaciones en la misma industria (ej. distintas versiones de "Crypto"), lo que requiere normalizaci√≥n.

**üìå Antes de la Estandarizaci√≥n de `industry`**

üîç Se observan valores inconsistentes en la columna `industry`, con variaciones en nombres que deber√≠an representar la misma categor√≠a.

![image.png](image%2015.png)

**üìå Despu√©s de la estandarizaci√≥n de `industry`**

‚úÖ Se unificaron los nombres de las industrias para evitar inconsistencias y mejorar la calidad del an√°lisis. Ahora, todas las variaciones de una misma categor√≠a se agrupan bajo un √∫nico nombre est√°ndar.

![image.png](image%2016.png)

### An√°lisis de la Columna `country`

‚úÖ Se eliminaron caracteres innecesarios y se unific√≥ la nomenclatura de los pa√≠ses para evitar registros inconsistentes.

![image.png](image%2017.png)

### **üìå An√°lisis de la Columna `date`**

- La columna `date` estaba almacenada como texto, lo que dificultaba su manipulaci√≥n y an√°lisis.
- Se convirti√≥ al formato `DATE` utilizando `STR_TO_DATE()`, permitiendo operaciones como filtrado por rango de fechas o c√°lculos temporales.

üì∑ **Antes de la conversi√≥n (`company_layoffs_cleaned2`):**

![image.png](image%2018.png)

üì∑ **Despu√©s del `UPDATE` en `date` :**

![image.png](image%2019.png)

Luego de ejecutar `ALTER TABLE`, la columna `date` cambia de tipo `TEXT` a `DATE`, asegurando su correcto tratamiento en consultas temporales y facilitando an√°lisis como filtros por fecha o c√°lculos de intervalos.

![image.png](image%2020.png)

‚úÖ **Resultado:** `date` ahora est√° en un formato adecuado para operaciones anal√≠ticas y reportes. 

## **PASO 3: Manejo de valores nulos**

En esta etapa, identificamos y tratamos los valores faltantes en la columna `industry`.

- **Valores VAC√çOS en `industry`**: Se reemplazan los valores vac√≠os con `NULL`, ya que esto permite un mejor manejo de datos en consultas SQL posteriores.

![image.png](image%2021.png)

Para completar los valores faltantes en la columna `industry`, realizamos un **JOIN** con los registros existentes de la misma compa√±√≠a. De esta forma, si una empresa ya tiene una industria asociada en otra fila, se copia ese valor en las filas donde `industry` es `NULL`.

![image.png](image%2022.png)

Despu√©s de realizar el `JOIN`, ejecutamos un `SELECT` para comprobar que los valores de la columna `industry` han sido correctamente asignados a las compa√±√≠as que ten√≠an valores nulos.

![image.png](image%2023.png)

Despu√©s de aplicar el `UPDATE`, la columna `industry` ha sido actualizada correctamente. Ahora, todas las compa√±√≠as tienen una industria asignada cuando era posible inferirla a partir de registros existentes.

![image.png](image%2024.png)

### **PASO 4: Eliminaci√≥n de datos NULL y columnas innecesarias**

En esta etapa, refinamos la base de datos eliminando informaci√≥n que no aporta valor significativo para el an√°lisis final.

E**liminaci√≥n de datos NULL ( `total_laid_off` y `percentage_laid_off`):** Se eliminan las filas donde `total_laid_off` y `percentage_laid_off` no contienen datos. Aunque podr√≠amos conservarlas, su ausencia genera incertidumbre en el an√°lisis y puede afectar la calidad de las conclusiones.

![image.png](image%2025.png)

### **üìå Razones para eliminar estas filas**

‚úÖ **Datos incompletos y sesgo en el an√°lisis:** La falta de valores en variables clave como `total_laid_off` y `percentage_laid_off` impide obtener una visi√≥n clara del impacto de los despidos en cada empresa. Si estas filas permanecen, podr√≠an generar sesgos o interpretaciones err√≥neas.

‚úÖ **Dificultad para la imputaci√≥n:** No contamos con informaci√≥n suficiente para completar estos datos de manera confiable. M√©todos como la imputaci√≥n por promedio o mediana podr√≠an distorsionar los resultados.

‚úÖ **Impacto en visualizaciones y modelos predictivos:** Mantener datos nulos en m√©tricas clave podr√≠a afectar gr√°ficos, dashboards y modelos de Machine Learning, ya que algunas herramientas no manejan bien los valores faltantes.

### **Eliminaci√≥n de la columna `row_num`**

La columna `row_num` fue utilizada exclusivamente para depuraci√≥n y ordenamiento temporal durante la limpieza de datos.

En la versi√≥n final del dataset, ya no aporta informaci√≥n relevante para el an√°lisis.

Su permanencia solo incrementar√≠a el tama√±o del dataset sin un beneficio real.

### **üìå Razones para eliminar esta columna**

‚úÖ **Evitar redundancia y reducir espacio:** Esta columna no tiene valor anal√≠tico y solo ocupa espacio en memoria.

‚úÖ **Mejorar eficiencia en consultas:** Al eliminar columnas innecesarias, las consultas SQL son m√°s r√°pidas y eficientes.

‚úÖ **Facilitar exportaci√≥n y visualizaci√≥n:** Un dataset m√°s limpio y compacto es m√°s f√°cil de manejar en herramientas como Tableau, Power BI o Pandas.

## **üìä Resultado Final**

Despu√©s de aplicar el proceso de limpieza y transformaci√≥n, obtenemos un dataset optimizado para an√°lisis.

‚úî **Base de datos sin duplicados ni errores:** Se eliminaron inconsistencias y registros redundantes.

‚úî **Formato homog√©neo y estructurado:** Los datos fueron normalizados para facilitar consultas y visualizaci√≥n.

‚úî **Mayor calidad y confiabilidad:** Se redujo la cantidad de valores nulos y se optimiz√≥ la estructura de la base de datos.

üìé **üîó C√≥digo completo:** [`data_cleaning.sql`](https://www.notion.so/Data-Cleaning-MySQL-Full-Project-1ac30b66251980089dffda3ae4cf6f72?pvs=21)

üìå *Este proceso es fundamental en cualquier an√°lisis de datos, asegurando informaci√≥n precisa y lista para visualizaci√≥n, reporting y modelado predictivo. üöÄ*